
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Journal Spinners</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
  }
  .spinner-container {
    display: inline-block;
    margin: 20px;
  }
  canvas {
    background: #fff;
    border-radius: 50%;
  }
  .history {
    margin-top: 10px;
    font-size: 14px;
    text-align: left;
    max-width: 420px;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid #ccc;
    padding: 5px;
    min-height: 40px;
  }
  button {
    margin-top: 10px;
    padding: 5px 10px;
    font-size: 14px;
  }
</style>
</head>
<body>
<h2>Directions:</h2>
<p>
For the color spinner, spin the wheel three times to get three different colors to integrate into your background. 
For the stencil/stamp wheel, spin the wheel twice to get two different stencils or stamps to use in the background. 
Lastly, for the theme wheel, spin once to get the theme for your two-page art journal spread.
</p>

<div class="spinner-container">
  <h3>Color Spinner</h3>
  <canvas id="colorSpinner" width="420" height="420"></canvas><br>
  <button id="colorBtn" onclick="spinWheel(colorWheel)">Spin</button>
  <div class="history" id="colorHistory"></div>
</div>

<div class="spinner-container">
  <h3>Stencils/Stamps Spinner</h3>
  <canvas id="stencilSpinner" width="420" height="420"></canvas><br>
  <button id="stencilBtn" onclick="spinWheel(stencilWheel)">Spin</button>
  <div class="history" id="stencilHistory"></div>
</div>

<div class="spinner-container">
  <h3>Theme Spinner</h3>
  <canvas id="themeSpinner" width="420" height="420"></canvas><br>
  <button id="themeBtn" onclick="spinWheel(themeWheel)">Spin</button>
  <div class="history" id="themeHistory"></div>
</div>

<script>
class Spinner {
  constructor(canvasId, sections, colors, historyId, maxSpins, contrastMode=false) {
    this.canvas = document.getElementById(canvasId);
    this.ctx = this.canvas.getContext("2d");
    this.sections = sections;
    this.colors = colors;
    this.historyDiv = document.getElementById(historyId);
    this.angle = 0;
    this.contrastMode = contrastMode;
    this.history = [];
    this.maxSpins = maxSpins;
    this.btn = document.getElementById(canvasId.replace("Spinner", "Btn"));
    this.draw();
  }
  
  draw() {
    const ctx = this.ctx;
    const r = this.canvas.width / 2;
    const sliceAngle = (2 * Math.PI) / this.sections.length;
    ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
    ctx.save();
    ctx.translate(r, r);
    ctx.rotate(this.angle);
    
    for (let i = 0; i < this.sections.length; i++) {
      const startAngle = i * sliceAngle;
      const endAngle = startAngle + sliceAngle;
      ctx.beginPath();
      ctx.moveTo(0, 0);
      let fillColor = this.colors[i % this.colors.length];
      ctx.fillStyle = fillColor;
      ctx.arc(0, 0, r, startAngle, endAngle);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
      
      ctx.save();
      ctx.rotate(startAngle + sliceAngle / 2);
      ctx.translate(r * 0.6, 0);
      ctx.rotate(Math.PI / 2);
      
      let text = this.sections[i];
      if (this.contrastMode) {
        ctx.fillStyle = (fillColor.toLowerCase() === "#000000") ? "#FFFFFF" : "#000000";
      } else {
        ctx.fillStyle = "#000000";
      }
      
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      
      const words = text.split(" ");
      let fontSize = 12;
      let spacing = 14;
      ctx.font = `bold ${fontSize}px Arial`;
      
      const maxWordLength = Math.max(...words.map(w => w.length));
      if (maxWordLength > 10) {
        fontSize = 10;
        spacing = 12;
        ctx.font = `bold ${fontSize}px Arial`;
      }
      
      if (words.length === 1) {
        const chars = words[0].split("");
        const totalHeight = spacing * (chars.length - 1);
        const startY = -totalHeight / 2;
        for (let c = 0; c < chars.length; c++) {
          ctx.fillText(chars[c], 0, startY + c * spacing);
        }
      } else {
        const mid = Math.ceil(words.length / 2);
        const col1 = words.slice(0, mid).join(" ").split("");
        const col2 = words.slice(mid).join(" ").split("");
        
        const colSpacing = fontSize + 4;
        const totalWidth = colSpacing;
        const startX = -totalWidth / 2;
        
        const totalHeight1 = spacing * (col1.length - 1);
        const totalHeight2 = spacing * (col2.length - 1);
        const startY1 = -totalHeight1 / 2;
        const startY2 = -totalHeight2 / 2;
        
        for (let c = 0; c < col1.length; c++) {
          ctx.fillText(col1[c], startX, startY1 + c * spacing);
        }
        for (let c = 0; c < col2.length; c++) {
          ctx.fillText(col2[c], startX + colSpacing, startY2 + c * spacing);
        }
      }
      
      ctx.restore();
    }
    
    ctx.restore();
    
    ctx.beginPath();
    ctx.arc(r, r, 30, 0, 2 * Math.PI);
    ctx.fillStyle = "#fff";
    ctx.fill();
    ctx.stroke();
  }
  
  spin() {
    if (this.history.length >= this.maxSpins) {
      this.btn.disabled = true;
      return;
    }
    const spins = Math.random() * 5 + 5;
    const finalAngle = this.angle + spins * Math.PI * 2 + Math.random() * Math.PI * 2;
    const duration = 2000;
    const startTime = performance.now();
    const animate = (time) => {
      const t = Math.min((time - startTime) / duration, 1);
      this.angle = this.angle + (finalAngle - this.angle) * t;
      this.draw();
      if (t < 1) {
        requestAnimationFrame(animate);
      } else {
        this.angle = finalAngle % (2 * Math.PI);
        this.draw();
        this.recordChoice();
      }
    };
    requestAnimationFrame(animate);
  }
  
  recordChoice() {
    const sliceAngle = (2 * Math.PI) / this.sections.length;
    const index = Math.floor(((2 * Math.PI) - this.angle + Math.PI / 2) % (2 * Math.PI) / sliceAngle);
    const choice = this.sections[index];
    
    if (this.history.includes(choice)) {
      // auto-respin if duplicate
      this.spin();
      return;
    }
    
    this.history.push(choice);
    this.historyDiv.textContent = this.history.join(", ");
    
    if (this.history.length >= this.maxSpins) {
      this.btn.disabled = true;
    }
  }
}

const colorSections = ["Red","Orange","Yellow","Green","Blue","Indigo","Violet","Pink","Brown","Gray","Cyan","Magenta"];
const colorColors = ["#FF0000","#FFA500","#FFFF00","#008000","#0000FF","#4B0082","#EE82EE","#FFC0CB","#A52A2A","#808080","#00FFFF","#FF00FF"];

const stencilSections = ["Flower","Butterfly","Circles","Stars","Deco Pattern","Harlequin Pattern","Hearts","Arrows","Crackle","Rectangle Blocks","Honeycomb","Trees"];
const stencilColors = Array.from({length: stencilSections.length}, (_,i) => i % 2 === 0 ? "#000000" : "#FFFFFF");

const themeSections = ["Love","Family","Dreams","Favorite Poem","Happiness","Nature's Beauty","Laughter","Furry Friends","When I Was Younger","Letter to Future Self"];
const themeColors = ["#FF9999","#FFCC99","#FFFF99","#CCFF99","#99FF99","#99FFFF","#9999FF","#CC99FF","#FF99CC","#FFCCFF"];

const colorWheel = new Spinner("colorSpinner", colorSections, colorColors, "colorHistory", 3);
const stencilWheel = new Spinner("stencilSpinner", stencilSections, stencilColors, "stencilHistory", 2, true);
const themeWheel = new Spinner("themeSpinner", themeSections, themeColors, "themeHistory", 1);

function spinWheel(wheel) {
  wheel.spin();
}
</script>
</body>
</html>
